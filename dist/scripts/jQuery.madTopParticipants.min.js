/**********************************************************************\
*
*	jQuery.madTopParticipants
*	----------------------
*	version: 2.0.3
*	date: 2020/08/19
*	license: GPL-3.0-or-later
*	copyright (C) 2020 Brian Patrick Mucha
*
\**********************************************************************/

!function(a){"use strict";function t(t,e){var i=[],n=[];a.each(e.fr_ids,function(t,s){var o="method=getTopParticipantsData&v=1.0&api_key="+e.apiKey+"&response_format=json&suppress_response_codes=true&fr_id="+s,r=e.proxyURL+escape(e.secureConvioPath+"CRTeamraiserAPI?"+o),l=a.getJSON(r,function(a){n.push(a)});i.push(l)}),a.when.apply(a,i).then(function(){var i=[];Array.prototype.slice.call(arguments,0);a.each(n,function(a,t){if(t.getTopParticipantsDataResponse){var e;for(e=0;e<t.getTopParticipantsDataResponse.teamraiserData.length;e++)t.getTopParticipantsDataResponse.teamraiserData[e].total_num=Number(t.getTopParticipantsDataResponse.teamraiserData[e].total.replace(/[^0-9.-]+/g,""));i=[].concat(i,t.getTopParticipantsDataResponse.teamraiserData)}}),function(t,e,i){if(t.errorResponse)e.html('<div class="list_message">('+t.errorResponse.message+")</div>");else{a(e).empty();var n=function(a,t,e){if(0===arguments.length)return[];if(1===arguments.length){if(null==a)return[];if(Array.isArray(a))return a}return Array.prototype.slice.call(arguments)}(t);a(n).length>0?(n.sort((a,t)=>t.total_num-a.total_num),a.each(n,function(a,t){var n,s,o,r,l=document.getElementById(i.results_template_id),p=l.innerHTML;if(s=this.id,o=this.name,r=this.total,n=p.replace(/%%id%%/g,s).replace(/%%name%%/g,o).replace(/%%total%%/g,r),e.append(n),a+1==i.maxCount)return!1})):e.html('<div class="list_message">(end of list)</div>'),i.callBack&&i.callBack()}}(i,t,e)}).fail(function(){window.console&&console.error("Top Participants: unsuccessful")})}var e={},i={fr_ids:[],maxCount:10,loadingImage:null,loadingImageAlt:null,loadingText:null,callback:function(){}},n={init:function(n){(function(t,e){a(t).empty(),e.loadingImage&&e.loadingText?t.append('<div class="list_loading"><img alt="'+e.loadingImageAlt+'" src="'+e.loadingImage+'" />'+e.loadingText+"</div>"):e.loadingImage?t.append('<div class="list_loading"><img alt="'+e.loadingImageAlt+'" src="'+e.loadingImage+'" /></div>'):e.loadingText&&t.append('<div class="list_loading">'+e.loadingText+"</div>")})(this,e=a.extend({},i,n)),this.data("settings",e),t(this,e)}};a.fn.madTopParticipants=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void a.error("Method "+t+" does not exist on jQuery.madTopParticipants"):n.init.apply(this,arguments)}}(jQuery);
